const ve=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))f(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&f(g)}).observe(document,{childList:!0,subtree:!0});function w(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function f(a){if(a.ep)return;a.ep=!0;const s=w(a);fetch(a.href,s)}};ve();function we(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var re={};(function(u){u.__esModule=!0;var l={},w="";try{w=location.hash.toString()}catch{}var f=g(w),a=!1;try{a=window.parent!=null&&window!=window.parent,a&&window.addEventListener("message",function(e){if(e.source===window.parent){var t;try{t=JSON.parse(e.data)}catch{return}!t||!t.eventType||v(t.eventType,t.eventData)}})}catch{}function s(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch{return e}}function g(e){e=e.replace(/^#/,"");var t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=s(e),t;var n=e.indexOf("?");if(n>=0){var o=e.substr(0,n);t._path=s(o),e=e.substr(n+1)}var c=x(e);for(var y in c)t[y]=c[y];return t}function x(e){var t={};if(!e.length)return t;for(var n=e.split("&"),o=0;o<n.length;o++){var c=n[o].split("="),y=s(c[0]),i=c[1]==null?null:s(c[1]);t[y]=i}return t}function j(e,t){var n=e.indexOf("#");if(n<0)return e+"#"+t;var o=e.substr(n+1);return o.indexOf("=")>=0||o.indexOf("?")>=0?e+"&"+t:o.length>0?e+"?"+t:e+t}function D(e,t,n){if(t||(t=function(){}),n===void 0&&(n=""),window.TelegramWebviewProxy!==void 0)window.TelegramWebviewProxy.postEvent(e,JSON.stringify(n)),t();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:e,eventData:n})),t();else if(a)try{var o="https://web.telegram.org";o="*",window.parent.postMessage(JSON.stringify({eventType:e,eventData:n}),o),f.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",e,n),t()}catch(c){t(c)}else f.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",e,n),t({notAvailable:!0})}function v(e,t){E(e,function(n){n(e,t)})}function E(e,t){var n=l[e];if(!(n===void 0||!n.length))for(var o=0;o<n.length;o++)try{t(n[o])}catch{}}function ae(e,t){l[e]===void 0&&(l[e]=[]);var n=l[e].indexOf(t);n===-1&&l[e].push(t)}function se(e,t){if(l[e]!==void 0){var n=l[e].indexOf(t);n!==-1&&l[e].splice(n,1)}}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:f,onEvent:ae,offEvent:se,postEvent:D,receiveEvent:v,callEventCallbacks:E},window.Telegram.Utils={urlSafeDecode:s,urlParseQueryString:x,urlParseHashParams:g,urlAppendHashParams:j},window.TelegramGameProxy_receiveEvent=v,window.TelegramGameProxy={receiveEvent:v};var ue=window.Telegram.Utils,p=window.Telegram.WebView,k=p.initParams,d={},F="",C,S={},V="light";if(k.tgWebAppData&&k.tgWebAppData.length){F=k.tgWebAppData,C=ue.urlParseQueryString(F);for(var J in C){var _=C[J];try{_!=null&&(_.substr(0,1)=="{"&&_.substr(-1)=="}"||_.substr(0,1)=="["&&_.substr(-1)=="]")&&(C[J]=JSON.parse(_))}catch{}}}if(f.tgWebAppThemeParams&&f.tgWebAppThemeParams.length){var le=f.tgWebAppThemeParams;try{var fe=JSON.parse(le);K(fe)}catch{}}function ce(e,t){t.theme_params&&(K(t.theme_params),window.Telegram.WebApp.MainButton.setParams({force_update:!0}),I("themeChanged"))}var Q=window.innerHeight;function de(e,t){t.height&&(window.removeEventListener("resize",R),H(t))}function R(e){Q!=window.innerHeight&&(Q=window.innerHeight,I("viewportChanged",{isStateStable:!0}))}function I(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),p.callEventCallbacks("webview:"+e,function(n){n.apply(d,t)})}function G(e,t){p.onEvent("webview:"+e,t)}function X(e,t){p.offEvent("webview:"+e,t)}function B(e,t){var n=document.documentElement;n&&n.style&&n.style.setProperty&&n.style.setProperty("--tg-"+e,t)}function K(e){var t;for(var n in e)(t=$(e[n]))&&(S[n]=t,n=="bg_color"&&(V=pe(t)?"dark":"light",B("color-scheme",V)),n="theme-"+n.split("_").join("-"),B(n,t))}var W=!1,T=!1,Y=!0;function H(e){typeof e!="undefined"&&(Y=!!e.is_expanded,W=e.height,e.is_state_stable&&(T=e.height),I("viewportChanged",{isStateStable:!!e.is_state_stable}));var t,n;W!==!1?t=W-h+"px":t=h?"calc(100vh - "+h+"px)":"100vh",T!==!1?n=T-h+"px":n=h?"calc(100vh - "+h+"px)":"100vh",B("viewport-height",t),B("viewport-stable-height",n)}function $(e){e+="";var t;return/^#([0-9a-f]){6}$/i.test(e)?e.toLowerCase():(t=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e))?("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase():!1}function pe(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),c=Math.sqrt(.299*(t*t)+.587*(n*n)+.114*(o*o));return c<120}function ge(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,n=e.length-1;n>=0;n--){var o=e.charCodeAt(n);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&n--}return t}var h=0,be=function(){var e=!1,t=!0,n=!1,o="CONTINUE",c=!1,y=!1,i={};Object.defineProperty(i,"text",{set:function(r){i.setParams({text:r})},get:function(){return o},enumerable:!0}),Object.defineProperty(i,"color",{set:function(r){i.setParams({color:r})},get:function(){return c||S.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(i,"textColor",{set:function(r){i.setParams({text_color:r})},get:function(){return y||S.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(i,"isVisible",{set:function(r){i.setParams({is_visible:r})},get:function(){return e},enumerable:!0}),Object.defineProperty(i,"isProgressVisible",{get:function(){return n},enumerable:!0}),Object.defineProperty(i,"isActive",{set:function(r){i.setParams({is_active:r})},get:function(){return t},enumerable:!0}),p.onEvent("main_button_pressed",te);var b;if(f.tgWebAppDebug){b=document.createElement("tg-main-button");var Z={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var ee in Z)b.style[ee]=Z[ee];document.addEventListener("DOMContentLoaded",function r(m){document.removeEventListener("DOMContentLoaded",r),document.body.appendChild(b),b.addEventListener("click",te,!1)})}function te(){t&&I("mainButtonClicked")}function U(){var r=i.color,m=i.textColor;p.postEvent("web_app_setup_main_button",!1,e?{is_visible:!0,is_active:t,is_progress_visible:n,text:o,color:r,text_color:m}:{is_visible:!1}),f.tgWebAppDebug&&(b.style.display=e?"block":"none",b.style.opacity=t?"1":"0.8",b.style.cursor=t?"pointer":"auto",b.disabled=!t,b.innerText=o,b.style.backgroundImage=n?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",b.style.backgroundColor=r,b.style.color=m,h=e?48:0,document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=h+"px"),H())}function me(r){var m=!1;if(typeof r.text!="undefined"){var O=r.text.toString().replace(/^\s+|\s+$/g,"");if(!O.length)throw console.error("[Telegram.WebApp] Main button text is required",r.text),Error("WebAppMainButtonParamInvalid");if(O.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",O),Error("WebAppMainButtonParamInvalid");o!==O&&(m=!0),o=O}if(typeof r.color!="undefined")if(r.color===!1||r.color===null)c!==!1&&(m=!0),c=!1;else{var L=$(r.color);if(!L)throw console.error("[Telegram.WebApp] Main button color format is invalid",L),Error("WebAppMainButtonParamInvalid");c!==L&&(m=!0),c=L}if(typeof r.text_color!="undefined")if(r.text_color===!1||r.text_color===null)y!==!1&&(m=!0),y=!1;else{var M=$(r.text_color);if(!M)throw console.error("[Telegram.WebApp] Main button text color format is invalid",M),Error("WebAppMainButtonParamInvalid");y!==M&&(m=!0),y=M}if(typeof r.is_visible!="undefined"){if(r.is_visible&&!i.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e!==!!r.is_visible&&(m=!0),e=!!r.is_visible}return typeof r.is_active!="undefined"&&(t!==!!r.is_active&&(m=!0),t=!!r.is_active),(m||r.force_update)&&U(),i}return i.setText=function(r){return i.setParams({text:r})},i.onClick=function(r){return G("mainButtonClicked",r),i},i.offClick=function(r){return X("mainButtonClicked",r),i},i.show=function(){return i.setParams({is_visible:!0})},i.hide=function(){return i.setParams({is_visible:!1})},i.enable=function(){return i.setParams({is_active:!0})},i.disable=function(){return i.setParams({is_active:!1})},i.showProgress=function(r){return t=!!r,n=!0,U(),i},i.hideProgress=function(){return i.isActive||(t=!0),n=!1,U(),i},i.setParams=me,i}();Object.defineProperty(d,"initData",{get:function(){return F},enumerable:!0}),Object.defineProperty(d,"initDataUnsafe",{get:function(){return C},enumerable:!0}),Object.defineProperty(d,"colorScheme",{get:function(){return V},enumerable:!0}),Object.defineProperty(d,"themeParams",{get:function(){return S},enumerable:!0}),Object.defineProperty(d,"isExpanded",{get:function(){return Y},enumerable:!0}),Object.defineProperty(d,"viewportHeight",{get:function(){return(W===!1?window.innerHeight:W)-h},enumerable:!0}),Object.defineProperty(d,"viewportStableHeight",{get:function(){return(T===!1?window.innerHeight:T)-h},enumerable:!0}),Object.defineProperty(d,"MainButton",{value:be,enumerable:!0}),d.onEvent=function(e,t){G(e,t)},d.offEvent=function(e,t){X(e,t)},d.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(ge(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");p.postEvent("web_app_data_send",!1,{data:e})},d.ready=function(){p.postEvent("web_app_ready")},d.expand=function(){p.postEvent("web_app_expand")},d.close=function(){p.postEvent("web_app_close")},window.Telegram.WebApp=d,H(),window.addEventListener("resize",R),p.onEvent("theme_changed",ce),p.onEvent("viewport_changed",de),p.postEvent("web_app_request_theme"),p.postEvent("web_app_request_viewport"),u.default=d})(re);var A=we(re);A.ready();A.onEvent("themeChanged",()=>{document.documentElement.className=A.colorScheme});let ne=A.initData||"";const q=document.getElementById("sendanswer");q.disabled=!0;const he=document.getElementById("answers");let z=0,P=0;const N=3,ie=[{question:"What country has the highest life expectancy?",answers:["Hong Kong","Switzerland","Singapore","Italy"],rightAnswer:0},{question:"The tallest building in the world is located in which city?",answers:["Dubai","New York","Shanghai","None of the above"],rightAnswer:0},{question:"Which country do cities of Perth, Adelade & Brisbane belong to",answers:["USA","Greece","Australia"],rightAnswer:2}],ye=u=>{const w=document.querySelector("#answers").children;for(const f of w){const a=f.getElementsByTagName("input"),s=f.getElementsByTagName("label");for(const g of a)g.disabled=u;for(const g of s)g.classList.toggle("opacity-50")}},oe=()=>{if(P++,P>N){Ee();return}const u=P-1,l=ie[u],w=document.getElementById("progress-text"),f=document.getElementById("progressbar-full");w.innerText=`${P} of ${N}`,f.style.width=`${P/N*100}%`;const a=document.getElementById("question"),s=document.getElementById("answers");a.innerText=l.question,s.innerHTML="",l.answers.map((g,x)=>{const j=`answer-${x+1}`,D=document.createElement("div"),v=document.createElement("input");v.name="answer",v.type="radio",v.id=`answer-${x+1}`,v.dataset.id=x.toString(),v.classList.add("rounded-full","h-4","w-4","border","dark:border-white","border-gray-300","bg-white","dark:checked:bg-blue-500","dark:checked:border-blue-500","checked:bg-blue-600","checked:border-blue-600","focus:outline-none","transition","duration-200","mt-1","align-top","bg-no-repeat","bg-center","bg-contain","float-left","mr-2","cursor-pointer");const E=document.createElement("label");E.htmlFor=j,E.innerText=g,E.classList.add("inline-block","dark:text-white","text-gray-800"),D.appendChild(v),D.appendChild(E),s.appendChild(D)})},Ee=()=>{if(ne){const u=JSON.stringify({_auth:ne,result:z});fetch("/api/sendAnswer",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:u})}else{const u=`Right answers: ${z} of ${N}`;A.sendData(u),A.close()}};he.addEventListener("change",()=>{q.disabled=!1});q.addEventListener("click",u=>{u.preventDefault();const l=document.querySelector("input[name=answer]:checked"),w=parseInt(l.dataset.id),f=ie[P-1];w===f.rightAnswer&&z++,ye(!0),q.disabled=!0,oe()});window.addEventListener("load",()=>{oe()});
